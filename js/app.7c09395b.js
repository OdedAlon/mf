(function(e){function t(t){for(var n,c,i=t[0],o=t[1],u=t[2],m=0,p=[];m<i.length;m++)c=i[m],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&p.push(a[c][0]),a[c]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);l&&l(t);while(p.length)p.shift()();return s.push.apply(s,u||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,i=1;i<r.length;i++){var o=r[i];0!==a[o]&&(n=!1)}n&&(s.splice(t--,1),e=c(c.s=r[0]))}return e}var n={},a={app:0},s=[];function c(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.m=e,c.c=n,c.d=function(e,t,r){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(r,n,function(t){return e[t]}.bind(null,n));return r},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],o=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=o;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"061f":function(e,t,r){e.exports=r.p+"img/mf_logo_blue.be5d09fb.svg"},"18bb":function(e,t,r){e.exports=r.p+"img/PixabayLogo.f7d4c16c.svg"},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=r("bc3a"),s=r.n(a),c=r("2106"),i=r.n(c),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"app"},[r("app-header"),r("router-view"),r("app-footer")],1)},u=[],l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"app-header flex space-between align-center"},[e._m(0),r("nav",[e.currPath?r("router-link",{attrs:{to:"/"}},[r("button",[e._v("Back")])]):e._e()],1)])},m=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"logo flex"},[n("img",{attrs:{src:r("061f")}}),n("h2",[e._v("Image")])])}],p={computed:{currPath:function(){return"/search"===this.$route.path}}},g=p,f=r("2877"),d=Object(f["a"])(g,l,m,!1,null,null,null),v=d.exports,h=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},b=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"app-footer  flex justify-center align-center"},[n("p",[e._v("Â© All pictures from ")]),n("img",{attrs:{src:r("18bb")}})])}],y={},w=Object(f["a"])(y,h,b,!1,null,null,null),x=w.exports,_={components:{appHeader:v,appFooter:x}},I=_,O=Object(f["a"])(I,o,u,!1,null,null,null),j=O.exports,S=r("8c4f"),$=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"home-page app-main"},[r("h1",[e._v("My Favorite Images")]),r("saved-img-list",{staticClass:"img-list",attrs:{imgs:e.savedImgs},on:{remove:e.removeImg}})],1)},k=[],P=r("1da1"),C=(r("96cf"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ul",{staticClass:"saved-img-list clean-list flex wrap justify-center"},[e._l(e.imgs,(function(t){return r("li",{key:t.id},[r("saved-img-preview",{attrs:{img:t},on:{remove:function(t){return e.$emit("remove",t)}}})],1)})),r("li",[r("router-link",{attrs:{to:"/search"}},[r("button",{staticClass:"btn-add"},[e._v("Add image")])])],1)],2)}),R=[],B=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("article",{staticClass:"saved-img-preview flex column space-between w3-animate-opacity"},[r("p",{staticClass:"data"},[e._v(e._s(e.img.user))]),r("img",{attrs:{src:""+e.img.imgUrl}}),r("button",{staticClass:"action",on:{click:function(t){return e.$emit("remove",e.img.id)}}},[e._v("remove")])])},E=[],A={props:{img:Object}},M=A,J=Object(f["a"])(M,B,E,!1,null,null,null),N=J.exports,q={components:{savedImgPreview:N},props:{imgs:Array}},L=q,T=Object(f["a"])(L,C,R,!1,null,null,null),D=T.exports,U={components:{SavedImgList:D},created:function(){this.loadSavedImgs()},methods:{loadSavedImgs:function(){var e=this;return Object(P["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$store.dispatch({type:"loadSavedImgs"});case 1:case"end":return t.stop()}}),t)})))()},removeImg:function(e){var t=this;return Object(P["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$store.dispatch({type:"removeImg",id:e});case 2:case"end":return r.stop()}}),r)})))()}},computed:{savedImgs:function(){return this.$store.getters.savedImgs}}},F=U,H=Object(f["a"])(F,$,k,!1,null,null,null),z=H.exports,G=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"search app-main"},[r("img-search",{on:{searched:e.setSearch}}),r("searched-img-list",{attrs:{savedImgs:e.savedImgs,imgs:e.imgsToShow},on:{save:e.saveImg},scopedSlots:e._u([{key:"pagination",fn:function(){return[r("div",{staticClass:"pagination flex justify-center"},[r("button",{on:{click:function(t){return e.changePage(-1)}}},[e._v("Previous page")]),r("p",[e._v(e._s(e.currPage))]),r("button",{on:{click:function(t){return e.changePage(1)}}},[e._v("Next page")])])]},proxy:!0}])})],1)},K=[],Q=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"img-search flex column align-center"},[r("form",{staticClass:"flex column align-center",on:{submit:function(t){return t.preventDefault(),e.searchImg.apply(null,arguments)}}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.searchBy.name,expression:"searchBy.name"}],attrs:{type:"text",placeholder:"Search for Images..."},domProps:{value:e.searchBy.name},on:{input:function(t){t.target.composing||e.$set(e.searchBy,"name",t.target.value)}}}),r("button",[e._v("Search")])])])},V=[],W={data:function(){return{searchBy:{name:""}}},methods:{searchImg:function(){this.$emit("searched",JSON.parse(JSON.stringify(this.searchBy)))}}},X=W,Y=Object(f["a"])(X,Q,V,!1,null,null,null),Z=Y.exports,ee=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("ul",{staticClass:"searched-img-list clean-list flex wrap justify-center"},e._l(e.imgs,(function(t){return r("li",{key:t.id},[r("searched-img-preview",{attrs:{img:t,isAdded:e.isImgSaved(t.id)},on:{save:function(t){return e.$emit("save",t)}}})],1)})),0),e.imgs?e._t("pagination"):e._e()],2)},te=[],re=(r("c740"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("article",{staticClass:"searched-img-preview flex column space-between w3-animate-opacity"},[r("img",{attrs:{src:""+e.img.imgUrl}}),r("button",{staticClass:"action",class:e.isAdded?"false":"",on:{click:function(t){return e.$emit("save",e.img)}}},[e._v("Add")]),r("div",{staticClass:"added",class:e.isAdded?"true":""},[e._v("Added")])])}),ne=[],ae={props:{img:Object,isAdded:Boolean}},se=ae,ce=Object(f["a"])(se,re,ne,!1,null,null,null),ie=ce.exports,oe={components:{searchedImgPreview:ie},props:{imgs:Array,savedImgs:Array},methods:{isImgSaved:function(e){if(this.savedImgs){var t=this.savedImgs.findIndex((function(t){return t.id===e}));return-1!==t}}}},ue=oe,le=Object(f["a"])(ue,ee,te,!1,null,null,null),me=le.exports,pe={components:{imgSearch:Z,searchedImgList:me},data:function(){return{currPage:1}},methods:{setSearch:function(e){var t=this;return Object(P["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.currPage=1,r.next=3,t.$store.commit({type:"setSearch",searchBy:e});case 3:return r.next=5,t.$store.dispatch({type:"loadImgs"});case 5:t.$store.dispatch({type:"loadSavedImgs"});case 6:case"end":return r.stop()}}),r)})))()},saveImg:function(e){var t=this;return Object(P["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$store.dispatch({type:"saveImg",img:e});case 2:case"end":return r.stop()}}),r)})))()},changePage:function(e){1===this.currPage&&-1===e||(this.currPage+=e,this.reloadPage(this.currPage))},reloadPage:function(e){var t=this;return Object(P["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$store.dispatch({type:"loadImgs",currPage:e});case 2:t.$store.dispatch({type:"loadSavedImgs"});case 3:case"end":return r.stop()}}),r)})))()}},computed:{imgsToShow:function(){return this.$store.getters.imgs},savedImgs:function(){return this.$store.getters.savedImgs}}},ge=pe,fe=Object(f["a"])(ge,G,K,!1,null,null,null),de=fe.exports;n["a"].use(S["a"]);var ve=[{path:"/",component:z},{path:"/search",component:de}],he=new S["a"]({routes:ve}),be=he,ye=r("2f62"),we=(r("b0c0"),r("a434"),r("99af"),r("d3b7"),r("7db0"),{query:xe,save:_e,get:Ie,post:Oe,put:je,remove:Se});function xe(e){var t=$e(e);return Promise.resolve(t)}function _e(e,t){return ke(e,t),Promise.resolve(t)}function Ie(e,t){return xe(e).then((function(e){return e.find((function(e){return e._id===t}))}))}function Oe(e,t){return xe(e).then((function(r){return r.push(t),ke(e,r),t}))}function je(e,t){return xe(e).then((function(r){var n=r.findIndex((function(e){return e._id===t._id}));return r.splice(n,1,t),ke(e,r),t}))}function Se(e,t){return xe(e).then((function(r){var n=r.findIndex((function(e){return e._id===t}));r.splice(n,1),ke(e,r)}))}function $e(e){var t=localStorage.getItem(e);return t?JSON.parse(t):[]}function ke(e,t){localStorage[e]=JSON.stringify(t)}var Pe="img",Ce={query:Re,save:Ee,remove:Be};function Re(){return we.query(Pe)}function Be(e){return we.remove(Pe,e)}function Ee(e){return we.post(Pe,e)}var Ae={state:{imgs:null,savedImgs:null,searchBy:""},getters:{imgs:function(e){return e.imgs},savedImgs:function(e){return e.savedImgs},searchBy:function(e){return e.searchBy}},mutations:{setSavedImgs:function(e,t){var r=t.savedImgs;e.savedImgs=r},setImgs:function(e,t){var r=t.imgsData;e.imgs=r},setSearch:function(e,t){var r=t.searchBy;e.searchBy=r.name},saveImg:function(e,t){var r=t.img;console.log(r),e.savedImgs.push(r)},removeImg:function(e,t){var r=t.id,n=e.savedImgs.findIndex((function(e){return e.id===r}));e.savedImgs.splice(n,1)}},actions:{loadSavedImgs:function(e){return Object(P["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ce.query();case 3:r=t.sent,e.commit({type:"setSavedImgs",savedImgs:r}),t.next=11;break;case 7:throw t.prev=7,t.t0=t["catch"](0),console.log(t.t0),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))()},loadImgs:function(e,t){return Object(P["a"])(regeneratorRuntime.mark((function r(){var n,a,c,i,o,u,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=t.currPage,a=void 0===n?1:n,e.state.searchBy){r.next=3;break}return r.abrupt("return",null);case 3:return r.prev=3,c=e.state.searchBy,i="22934537-ab943f09e48b063de94cc2f15",r.next=8,s.a.get("https://pixabay.com/api/?key=".concat(i,"&q=").concat(c,"&image_type=photo&page=").concat(a,"&per_page=30"));case 8:for(o=r.sent,o=o.data.hits,u=[],l=0;l<o.length;l++)u.push({id:o[l].id,imgUrl:o[l].webformatURL,user:o[l].user});e.commit({type:"setImgs",imgsData:u}),r.next=18;break;case 15:r.prev=15,r.t0=r["catch"](3),console.log(r.t0);case 18:case"end":return r.stop()}}),r,null,[[3,15]])})))()},saveImg:function(e,t){return Object(P["a"])(regeneratorRuntime.mark((function r(){var n,a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a=t.img,r.prev=2,r.next=5,Ce.save(a);case 5:s=r.sent,n({type:"saveImg",img:s}),r.next=13;break;case 9:throw r.prev=9,r.t0=r["catch"](2),console.log(r.t0),r.t0;case 13:case"end":return r.stop()}}),r,null,[[2,9]])})))()},removeImg:function(e,t){return Object(P["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.id,r.prev=1,r.next=4,Ce.remove(n);case 4:e.commit({type:"removeImg",id:n}),r.next=11;break;case 7:throw r.prev=7,r.t0=r["catch"](1),console.log(r.t0),r.t0;case 11:case"end":return r.stop()}}),r,null,[[1,7]])})))()}}};n["a"].use(ye["a"]);var Me=new ye["a"].Store({strict:!0,state:{},modules:{imgModule:Ae}}),Je=r("4a7a"),Ne=r.n(Je);r("c860"),r("25f0");function qe(){for(var e="0123456789ABCDEF",t="#",r=0;r<6;r++)t+=e[Math.floor(16*Math.random())];return t}n["a"].use(i.a,s.a),n["a"].config.productionTip=!1,n["a"].directive("colorful",{inserted:function(e){e.addEventListener("keyup",(function(){e.style.backgroundColor=qe()}))}}),new n["a"]({router:be,store:Me,vSelect:Ne.a,render:function(e){return e(j)}}).$mount("#app")},c860:function(e,t,r){}});
//# sourceMappingURL=app.7c09395b.js.map